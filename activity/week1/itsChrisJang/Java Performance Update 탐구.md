## âœ… 1. ğŸ”„ JDK 17 ì´í›„ ì„±ëŠ¥ ê°œì„  íë¦„ ìš”ì•½

> â“ ì™œ JDK 21, 22, 23ì´ ë” ë¹ ë¥¼ê¹Œ?
>

### ğŸ” í•µì‹¬ ë°°ê²½

Java 17ì€ LTSì´ê¸´ í•˜ë‚˜ **ì„±ëŠ¥ ë©´ì—ì„œ JDK 21~23ì˜ ë³€í™”ëŠ” ë§¤ìš° í¬ë©°**, ê·¸ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ **JVM ë‚´ë¶€ ê°œì„ ** ë•Œë¬¸ì…ë‹ˆë‹¤.

### ğŸ›  ì£¼ìš” ë‚´ë¶€ ìµœì í™” ìš”ì†Œ

| ë²”ì£¼ | ë³€í™” ë° íš¨ê³¼                                                                                                          |
| --- |------------------------------------------------------------------------------------------------------------------|
| **C2 ì»´íŒŒì¼ëŸ¬** | - Autovectorization í–¥ìƒ <br/>- Loop Unrolling, Inlining ë“± aggressive optimization <br/> - `Merged Store` íŒ¨í„´ ìë™ ê°ì§€ |
| **GC ê°œì„ ** | - ZGCì˜ Generational GC ê¸°ë³¸ ì ìš© (JDK 24) <br/> - Compact Object Header ì‹¤í—˜ ê¸°ëŠ¥ ë„ì…                                     |
| **Foreign Function & Memory API (Panama)** | - Native call ëŒ€ì²´ ê°€ëŠ¥- ë©”ëª¨ë¦¬ ì„¸ê·¸ë¨¼íŠ¸ ìµœì í™”ë¡œ native ëŒ€ë¹„ ë” ë¹ ë¥¸ ì²˜ë¦¬                                                             |
| **String Concatenation ìµœì í™”** | - MethodHandle ì¡°í•© â†’ Hidden Classë¡œ ë³€ê²½- **ì‹œì‘ ì†ë„ 40% í–¥ìƒ**                                                           |

### ğŸ“ˆ ì²´ê° ì„±ëŠ¥ ë³€í™”

- **ìŠ¤íƒ€íŠ¸ì—… ì‹œê°„** ê°œì„ : Leiden, CDS ìµœì í™”, string concat ë³€ê²½
- **ì²˜ë¦¬ëŸ‰(throughput)** ì¦ê°€: ë²¡í„° ì—°ì‚°, GC latency ê°ì†Œ
- **ë©”ëª¨ë¦¬ íš¨ìœ¨** í–¥ìƒ: Compact headers, Valhalla ì¤€ë¹„
- **ì‹ ê¸°ëŠ¥ ë„ì…**: Virtual Thread, Structured Concurrency â†’ ë™ì‹œì„± ì œì–´ ê°„í¸í™”

### âš–ï¸ 17 â†’ 21 ì´ìƒ ì—…ê·¸ë ˆì´ë“œ ê³ ë ¤ ì‹œ ì¥ë‹¨ì 

| í•­ëª© | ê³ ë ¤ ìš”ì†Œ                                                                                                         |
| --- |---------------------------------------------------------------------------------------------------------------|
| âœ… **ì¥ì ** | - ì„±ëŠ¥ ë° GC í–¥ìƒ <br/>- Loom ( virtual thread), Record ë“± ë„ì… <br/> - API ìµœì í™” ë° startup ê°œì„                           |
| âš ï¸ **ì£¼ì˜ì ** | - ì¼ë¶€ API deprecated or ì œê±° <br/> - `preview` ê¸°ëŠ¥ì— ëŒ€í•œ JVM ì˜µì…˜ í•„ìš” <br/> - í”„ë ˆì„ì›Œí¬ í˜¸í™˜ì„± (e.g., Spring Boot, JPA ë²„ì „ í™•ì¸) |

---

## âœ… 2. ğŸ§µ Loom (ê°€ìƒ ìŠ¤ë ˆë“œ)ì˜ ì‹¤ë¬´ ì ìš© ê°€ëŠ¥ì„±

> â“ WebfluxëŠ” ì´ë¯¸ ë…¼ë¸”ë¡œí‚¹ì¸ë°, Loomì€ ì™œ í•„ìš”í• ê¹Œ?

### ğŸ§  ê¸°ë³¸ ê°œë… ì •ë¦¬

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| **ê°€ìƒ ìŠ¤ë ˆë“œ (Virtual Thread)** | OS ìŠ¤ë ˆë“œì™€ 1:1 ë§¤í•‘í•˜ì§€ ì•Šê³ , JVMì´ ìŠ¤ì¼€ì¤„ë§í•˜ëŠ” ê²½ëŸ‰ ìŠ¤ë ˆë“œ |
| **Thread.start() â‰  ìƒˆë¡œìš´ OS thread** | â†’ context switching ë¹„ìš© ì—†ìŒâ†’ ìˆ˜ì‹­ë§Œ ê°œì˜ ë™ì‹œ ìŠ¤ë ˆë“œ ì²˜ë¦¬ ê°€ëŠ¥ |

### ğŸ§µ Loom vs WebFlux êµ¬ì¡° ë¹„êµ

| í•­ëª© | WebFlux | Loom ê¸°ë°˜ MVC |
| --- | --- | --- |
| **í”„ë¡œê·¸ë˜ë° ëª¨ë¸** | Reactive (Flux/Mono) | Imperative (ë™ê¸° ì½”ë“œ ìœ ì§€) |
| **ë™ì‹œì„± ì²˜ë¦¬** | ì´ë²¤íŠ¸ ë£¨í”„ ê¸°ë°˜, ë¹„ë™ê¸° Non-Blocking | Virtual Threadë¥¼ í†µí•œ ë™ê¸° íë¦„ |
| **í•™ìŠµ ê³¡ì„ ** | ë†’ìŒ (Reactor ì—°ì‚°ì í•™ìŠµ í•„ìš”) | ë‚®ìŒ (ê¸°ì¡´ ì½”ë“œ ì¬ì‚¬ìš© ê°€ëŠ¥) |
| **ë””ë²„ê¹…/íŠ¸ë ˆì´ì‹±** | ë³µì¡í•¨ | ë‹¨ìˆœí™”ë¨ |
| **ì„±ëŠ¥** | ê³ ì„±ëŠ¥ì´ë‚˜ ìƒí™©ì— ë”°ë¼ ì—­íš¨ê³¼ ê°€ëŠ¥ | ëŒ€ëŸ‰ ìŠ¤ë ˆë“œ í•„ìš” ì‹œ ìœ ë¦¬ |

### âœ… ì‹¤ë¬´ ì ìš© í¬ì¸íŠ¸

- **DB/ì™¸ë¶€ API í˜¸ì¶œì´ ë§ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì€ Loomì´ ë” ì§ê´€ì 
- Reactiveì— ìµìˆ™í•˜ì§€ ì•Šì€ íŒ€ì´ë¼ë©´ **ì½”ë“œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ ë¹„ìš©â†“**
- **Tomcat/Netty â†’ Virtual Thread ê¸°ë°˜ Executor ì „í™˜** ê°€ëŠ¥ì„±

```java
// ì‹¤ìŠµ : Loom vs Thread ë¹„êµ - ê°„ë‹¨í•œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì‹¤í–‰

public class VirtualThreadExample {
    public static void main(String[] args) throws InterruptedException {
        Runnable task = () -> {
            try {
                Thread.sleep(100);
                System.out.println("[" + Thread.currentThread() + "] Finished");
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
        };

        System.out.println("â–¶ Traditional Threads");
        for (int i = 0; i < 5; i++) {
            Thread thread = new Thread(task);
            thread.start();
        }

        Thread.sleep(200);
        System.out.println("â–¶ Virtual Threads");
        for (int i = 0; i < 5; i++) {
            Thread.startVirtualThread(task);
        }

        Thread.sleep(200);
    }
}
```

---

## âœ… 3. ğŸ’¡ Valhalla í”„ë¡œì íŠ¸: Value Objectì˜ ì„±ëŠ¥ì  ì´ì 

> â“ ì™œ ê°’ ê°ì²´(Value Object)ê°€ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ê¹Œ?
>

### ğŸ§¬ ë°°ê²½ ê°œë…: Value Object / Inline Class

ê¸°ì¡´ Java ê°ì²´ëŠ” **ì°¸ì¡° ê¸°ë°˜(reference)**ìœ¼ë¡œ ë™ì‘í•˜ì—¬, ë°°ì—´ì´ë‚˜ ì»¬ë ‰ì…˜ì— ê°ì²´ë¥¼ ë„£ìœ¼ë©´ **ê°„ì ‘ ë©”ëª¨ë¦¬ ì ‘ê·¼(2ì°¨ í¬ì¸í„°)**ì´ í•„ìš”í•©ë‹ˆë‹¤.

ValhallaëŠ” ê°ì²´ë¥¼ **ê°’ ê¸°ë°˜(flat layout)**ìœ¼ë¡œ ì €ì¥í•˜ì—¬ ìºì‹œ ì§€ì—­ì„±(locality)ê³¼ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ê°œì„ í•©ë‹ˆë‹¤.

### ğŸ“Š ì„±ëŠ¥ì  ì´ì 

| êµ¬ì¡° | ê¸°ì¡´ JVM | Valhalla ì ìš© ì‹œ |
| --- | --- | --- |
| `Point[]` | í¬ì¸í„° ë°°ì—´ + ê°ì²´ ë¶„ì‚° | ë©”ëª¨ë¦¬ ìƒ ì—°ì†ëœ `x, y, x, y` ë°°ì—´ |
| ë©”ëª¨ë¦¬ ì ‘ê·¼ | ì—¬ëŸ¬ ë²ˆ ìºì‹œ ì ‘ê·¼ | 1íšŒ ì—°ì† ì ‘ê·¼ ê°€ëŠ¥ |
| GC ì‘ì—…ëŸ‰ | ë†’ìŒ | ë‚®ìŒ (í—¤ë” ì—†ìŒ) |

### ğŸ’¬ ì‹¤ë¬´ ì˜ˆì‹œ

- `Point(x, y)`, `Color(r, g, b)`, `Money(amount, currency)` ë“± ìì£¼ ì“°ì´ëŠ” ë‹¨ìˆœ êµ¬ì¡°ì²´
- ëŒ€ëŸ‰ ê³„ì‚°, ë Œë”ë§, ì¢Œí‘œ ë³€í™˜, JSON ì§ë ¬í™” ì‹œ **flattened layoutì´ ë§¤ìš° ìœ ë¦¬**

---

## âœ… 4. ğŸš€ ZGC (Generational)ê³¼ ë©”ëª¨ë¦¬ íš¨ìœ¨

> â“ G1 GCì™€ ë¹„êµ ì‹œ ZGCì˜ ê°•ì ì€?

### ğŸŒ± ZGCì˜ íŠ¹ì§•

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| **Low Pause GC** | STW(Pause) ì‹œê°„ 1~2ms ìˆ˜ì¤€ |
| **í° í™ ì²˜ë¦¬** | ìˆ˜ì‹­ GB~1TBë„ ê°€ëŠ¥ |
| **GC ë™ì‘ ì›ë¦¬** | ë³‘ë ¬/ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ Pause ì—†ì´ ë§ˆí‚¹/ìŠ¤ìœ• ì§„í–‰ |

### ğŸ§  Generational ZGC (JDK 24 ê¸°ë³¸ ì ìš©)

| ì„¸ëŒ€ ë¶„ë¦¬ | íš¨ê³¼ |
| --- | --- |
| Young / Old Generation êµ¬ë¶„ | - ë‹¨ê¸° ê°ì²´ ì¤‘ì‹¬ GC ì‹¤í–‰ â†’ ë” ë¹ ë¦„- ì¥ê¸° ê°ì²´ëŠ” ëœ ìì£¼ ê²€ì‚¬ |

### ğŸ“ˆ G1 GC vs ZGC ë¹„êµ

| í•­ëª© | G1 GC | ZGC |
| --- | --- | --- |
| ì§€ì—° ì‹œê°„ | ì¤‘ê°„ (tens~hundreds ms) | ë§¤ìš° ë‚®ìŒ (<10ms) |
| Throughput | ë†’ìŒ | ë‚®ìŒ~ì¤‘ê°„ |
| ëŒ€í˜• í™ | ê°€ëŠ¥í•˜ì§€ë§Œ GC ì‹œê°„ ì¦ê°€ | íš¨ìœ¨ì  ì²˜ë¦¬ |
| ì„œë¹„ìŠ¤ ìœ í˜• | ì¼ë°˜ ì›¹ API, JVMê¸°ë°˜ ì„œë¹„ìŠ¤ | **Latency ë¯¼ê° ì„œë¹„ìŠ¤**, ëŒ€í˜• ë°°ì¹˜ ì‹œìŠ¤í…œ ë“± |

---

## âœ… 5. ğŸ§± Compact Object Headerì˜ ë©”ëª¨ë¦¬ ìµœì í™” íš¨ê³¼

> â“ í—¤ë”ê°€ ì‘ì•„ì§€ë©´ ì™œ ì„±ëŠ¥ì´ ì˜¬ë¼ê°ˆê¹Œ?

### ğŸ§© ê°ì²´ í—¤ë”ë€?

Javaì˜ ëª¨ë“  ê°ì²´ëŠ” **ìˆ¨ê²¨ì§„ í—¤ë”(12ë°”ì´íŠ¸ ë˜ëŠ” 8ë°”ì´íŠ¸)** ë¥¼ ê°€ì§.

#### ì—­í• 
- í´ë˜ìŠ¤ íƒ€ì… ì •ë³´
- `hashCode()` ì €ì¥
- GC ê´€ë ¨ ì •ë³´
- ë™ê¸°í™”(monitor) ì •ë³´

### âš™ï¸ Compact Headers (JDK 24 ì‹¤í—˜ì )

| í•­ëª© | ê¸°ì¡´ | Compact ì ìš© ì‹œ |
| --- | --- | --- |
| í—¤ë” í¬ê¸° | 96ë¹„íŠ¸ | 64ë¹„íŠ¸ |
| í‰ê·  ê°ì²´ í¬ê¸° | 32~64ë°”ì´íŠ¸ | í—¤ë” ë¹„ìœ¨ â†“ â†’ ì „ì²´ ë©”ëª¨ë¦¬ â†“ |

### ğŸ“ˆ ì‹¤ë¬´ì—ì„œ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ” íš¨ê³¼

- ìˆ˜ë°± ìˆ˜ì²œë§Œ ê°œ ê°ì²´ë¥¼ ë‹¤ë£¨ëŠ” ê²½ìš° â†’ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ **10~~20% ê°ì†Œ**
- ìºì‹œ ë¼ì¸ ì¶©ëŒ ê°ì†Œ â†’ L1/L2 Cache ì ì¤‘ë¥  ì¦ê°€ â†’ ì—°ì‚° ì„±ëŠ¥ í–¥ìƒ
- íŠ¹íˆ **String, DTO, Event ê°ì²´**ì²˜ëŸ¼ **ì‘ì§€ë§Œ ë°˜ë³µë˜ëŠ” ê°ì²´**ì— íš¨ê³¼ í¼

```java
// ì‹¤ìŠµ : Compact Object Header ë©”ëª¨ë¦¬ ë¹„êµ
// JOL(Java Object Layout) ì‚¬ìš© ì˜ˆì‹œ

import org.openjdk.jol.info.ClassLayout;

public class JolExample {
    static class NormalObject {
        int x;
        int y;
    }

    public static void main(String[] args) {
        NormalObject obj = new NormalObject();
        System.out.println(ClassLayout.parseInstance(obj).toPrintable());
    }
}
```